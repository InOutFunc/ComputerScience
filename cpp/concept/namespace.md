## scope and lifetime

作用域是变量能够起作用的地方、

声明周期是变量存在的时间段

foo() {
  int *p;
  {
   int x = 5; 
   p = &x;
  }
  int y = *p;

}

这段代码中的问题是、p的生命周期是整个函数。由于{}中没有同名p、p的作用域也可以到达{}内。但是x的声明周期只在{}中、因此在{}结束后、p指向的内容已经被释放掉了。

代码编译的时候没有报错、可能由于x内存的内容没有更改、导致结果表面上是对的

 

Ref:

[Scope vs. Lifetime of Variable](https://stackoverflow.com/questions/11137516/scope-vs-lifetime-of-variable)

## unnamed namespaces

- They are     directly usable in the same program and are used for declaring unique     identifiers.
- In unnamed     namespaces, name of the namespace in not mentioned in the declaration of     namespace.
- The name of     the namespace is uniquely generated by the compiler.
- The unnamed     namespaces you have created will only be accessible within the file you     created it in.
- Unnamed     namespaces are the replacement for the static declaration of variables.

 

 

 

// C++ program to demonstrate working of unnamed 

// namespaces 

\#include <iostream> 

using namespace std; 

 

// unnamed namespace declaration 

namespace

{

int rel = 300; 

}

 

int main() 

{

cout << rel << "\n"; // prints 300 

return 0; 

}

 