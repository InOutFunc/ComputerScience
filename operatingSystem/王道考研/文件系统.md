## 层次结构

>用户/应用程序
>
>用户接口（6文件的基本操作）
>
>文件目录系统（3文件目录）
>
>存取控制模块（8文件保护）
>
>逻辑文件系统与文件信息缓冲区（2文件的逻辑结构）
>
>物理文件系统（4文件的物理结构）
>
>辅助分配模块（5文件的存储空间管理）   设备管理模块（磁盘管理）
>
>设备

## 初识文件管理

文件--就是一组有意义的信息/数据集合

* 文件属性
  * 文件名
  * 标识符
  * 类型
  * 位置
  * 保护信息
* 内部怎样组织
  * 无结构文件
  * 有结构文件
    * 数据项
* 文件间怎样组织
  * 目录
  * 特殊的有结构文件
* os为用户，应用程序提供哪些功能
  * create系统调用
  * read系统调用
  * write系统调用
  * delete系统调用
  * open系统调用
  * close系统调用
* 文件数据怎样存在外存
  * 文件的物理结构

## 文件的逻辑结构

1. 顺序文件

串结构：顺序与关键字无关

顺序结构：

物理结构：链式存储，顺序存储

1. 索引文件

索引表本身是定长记录的顺序文件，因此可以随机访问

关键字作为索引号内容

增删记录时，需要更新索引表

指针ptr指向逻辑文件

可以用不同的数据项建立多个索引表

1. 索引顺序文件

索引表比文件本身大

* 一组记录对应一个索引表项
* 多级索引表

## 文件目录

* 文件目录
  * 文件控制块
  * 目录结构
    * 单级目录
    * 两级目录
    * 多级目录
    * 无环图目录
  * 索引结点（对文件控制块的优化）

### 文件控制块

目录表-》目录项-》读入照片目录的数据

照片目录对应的目录文件

目录文件中的一条记录就是一个“文件控制块（fcb)"：最重要的文件名，文件存放的物理位置

目录表中的表项是文件，文件表中的表项是表的内容

* 无环图目录结构

方便多个用户间的文件共享

* 冗余信息放入索引结点中，目录项里只有关键字和索引结点位置

## 文件的物理结构

* 连续分配

每个文件在磁盘上占有一组连续的块

文件目录中记录存放的起始块号和长度

* 链接分配

  * 隐式链接
  * 显示链接

  fat表

* 索引分配